
@{
    ViewBag.Title = "TaskList";
    Layout = "~/Views/Shared/_OffLayout.cshtml";
    ViewBag.Current = "headingSix";
}
<table class="offline-search-box">
    <tr>
        <td class="pull-right">
            <label>管理员：</label>
            <input class="form-control input-sm offline-search-inline" id="offmanager-task-query" placeholder="搜索内容" />
            <a class="btn btn-info btn-sm" id="offmanager-task-search"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</a>
        </td>
    </tr>
</table>
<div style="margin-bottom:10px;">
    <a class="btn btn-info btn-sm" id="offseller-manager-download"><i class="fa fa-download"></i>&nbsp;&nbsp;下载督导考勤信息</a>
</div>
<div id="offmanager-task-list">
   
</div>
<div class="modal fade" id="modal-downloadmanagertask">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">下载督导考勤数据表</h4>
            </div>
            <div class="modal-body">
                <div class="container">
                    <form class="form-inline">
                        <div class="form-group">
                            <label for="start-date" class="sr-only">开始时间</label>
                            <input type="text" id="start-date" class="form-control input-sm" placeholder="开始时间" />
                        </div>
                        <div class="form-group">
                            <label for="end-date" class="sr-only">开始时间</label>
                            <input type="text" id="end-date" class="form-control input-sm" placeholder="结束时间" />
                        </div>
                        <button type="submit" class="btn btn-default btn-sm" id="modal-manager-download-submit"><i class="fa fa-download"></i>&nbsp;&nbsp;下载</button>
                    </form><br />
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<script>
    $(function () {
        $.ajax({
            url: "/OffManager/TaskListPartial",
            success: function (data) {
                $("#offmanager-task-list").html(data)
            }
        });
        //搜索
        $("#offmanager-task-search").click(function () {
            var query = $("#offmanager-task-query").val()
            $.ajax({
                url: "/OffManager/TaskListPartial",
                data: {
                    query: query
                },
                success: function (data) {
                    $("#offmanager-task-list").html(data)
                }
            })
        });
        //下载工资表
        $("#offseller-manager-download").click(function () {
            $("#modal-downloadmanagertask").modal();
        });
        $("#modal-manager-download-submit").click(function () {
            var start = $("#start-date").val();
            var end = $("#end-date").val();
            window.location.href = "/OffManager/DownloadManagerTaskFile?start=" + start + "&end=" + end;
            return false;
        });
    })
</script>