@using PeriodAid.Models;
@model PeriodAid.Models.Employee
@{
    ViewBag.ImgUrl=Model.ImgUrl;
    ViewBag.Title = "Task_Management_Home";
    Layout = "~/Views/Shared/_TaskManagementLayout.cshtml";
}
<!--Subject Area-->
<div id="app-content">
    <div class="wrapper">
        <div class="container" id="subject-container">
            <div class="content-inner" id="personal_star_subject">
            </div>
            <div class="content-inner" id="personal_active_subject">
            </div>
            <div class="content-inner" id="personal_finish_subject">
            </div>
        </div>
    </div>
</div>
<!--Subject Area End-->

<!--My View-->
<div id="tm-my-view" class="tm-my-view tm-view">
<div class="tm-view-header tm-my-view-header">
    <div class="tm-my-view-control tm-view-control">
        <a href="javascript:;" class="tm-view-control-link active">近期的事</a>
        <a href="javascript:;" class="tm-view-control-link">任务</a>
        <a href="javascript:;" class="tm-view-control-link">文件</a>
        <a href="javascript:;" class="tm-view-control-link">收藏</a>
    </div>
    <div class="tm-my-view-close tm-control-view-Panel">
        <button type="button" class="close"><span aria-hidden="true">×</span></button>
    </div>
</div>
<div class="tm-view-content tm-my-view-content">
    <div class="tm-view-content-wrap  tm-view-wrap">
        <div class="tm-view-header clear-float">
            <div class="tm-view-header-left float-left">
                <div class="tm-my-view-control tm-view-control">
                    <a href="javascript:;" class="tm-view-control-link active">近期的任务</a>
                </div>
            </div>
            <div class="tm-view-header-right float-right">
                <div class="tm-my-view-control tm-view-control">
                    <ul>
                        <li class="tm-view-control-sort dropdown">
                            <a href="javascript:;" id="tm-view-dropdown-progress" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                <span>已完成</span>
                                <span class="caret"></span>
                            </a>
                            <ul  class="dropdown-menu tm_dropdown" aria-labelledby="tm-view-dropdown-progress">
                                <li>
                              <a href="#" class="selected">已完成</a>
                                </li>
                                <li>
                              <a href="#">未完成</a>
                                </li>
                            </ul>
                        </li>
                       <li class="tm-view-control-sort tm-has-line dropdown">
                           <a href="javascript:;" id="tm-view-dropdown-undefined" data-target="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                               <span>按时间排序</span>
                               <span class="caret"></span>
                           </a>
                           <ul class="dropdown-menu tm_dropdown" aria-labelledby="tm-view-dropdown-undefined">
                               <li><a href="#" class="selected">按时间排序</a></li>
                               <li><a href="#">按项目排序</a></li>
                           </ul>
                       </li>
                        <li class="tm-view-control-sort">
                            <a href="javascript:;">
                                <i class="fa fa-download color-blue" aria-hidden="true"></i>
                                导出excel
                            </a>
                        </li>                          
                    </ul>
                </div>
            </div>
        </div>
        <div class="tm-view-content-container  tm-view-container"> 
        </div>
    </div>
</div>
</div>
<!--My View End-->


@section scripts{ 
    <script>
        //Ajax获取各类型项目
        GetActiveSubject("#personal_active_subject")
        GetFinishSubject("#personal_finish_subject")
        //项目详细点击
        $(function () {
            //进入项目详情
            $("#subject-container").on("click", ".card-item", function () {
                var linkid = $(this).attr("data-link")
                if (linkid) {
                    location.href = "/TaskManagement/Subject_Detail?SubjectId=" + linkid
                }
            });
            //修改卡片即项目信息
            $("#subject-container").on("click", ".card-edit-btn", function () {
                $.ajax({
                    url: "/TaskManagement/EditSubject",
                    data: {
                        SubjectId: $(this).attr("data-link")
                    },
                    success: function (data) {
                        if (data != "FAIL") {
                            $("#Create-Subject-Content").html(data);
                            $("#Add-Subject").modal();
                        }
                        else {
                            ErrorAlert("获取项目基本信息失败。")
                        }
                    }
                })
                return false;
            });
            
        })
        
    </script>

}