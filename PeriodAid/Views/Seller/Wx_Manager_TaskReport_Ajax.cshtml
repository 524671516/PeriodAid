@model PeriodAid.Models.Off_Manager_Task

@using (Html.BeginForm("Wx_Manager_TaskReport_Ajax", "Seller", FormMethod.Post, new { id = "report-form" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.Id)
    @Html.HiddenFor(model => model.UserName)
    @Html.HiddenFor(model => model.TaskDate)
    @Html.HiddenFor(model => model.Status)
    <div class="weui_cells_title">工作日报</div>
    <div class="weui_cells weui_cells_form">
        <div class="weui_cell">
            <div class="weui_cell_bd weui_cell_primary">
                @Html.TextAreaFor(m => m.Event_Complete, new { @class = "weui_textarea", rows = "3", placeholder = "请输入已完成工作" })
                <div class="weui_textarea_counter"><abbr id="current_length_cp">0</abbr>/500</div>
            </div>
        </div>
        <div class="weui_cell">
            <div class="weui_cell_bd weui_cell_primary">
                @Html.TextAreaFor(m => m.Event_UnComplete, new { @class = "weui_textarea", rows = "3", placeholder = "请输入未完成工作" })
                <div class="weui_textarea_counter"><abbr id="current_length_uc">0</abbr>/500</div>
            </div>
        </div>
        <div class="weui_cell">
            <div class="weui_cell_bd weui_cell_primary">
                @Html.TextAreaFor(m => m.Event_Assistance, new { @class = "weui_textarea", rows = "3", placeholder = "请输入需协调工作" })
                <div class="weui_textarea_counter"><abbr id="current_length_as">0</abbr>/500</div>
            </div>
        </div>
    </div>
    <br />
    <div class="container">
        <a href="javascript:;" class="weui_btn weui_btn_primary" id="submit-btn">
            修改并提交
        </a>
    </div>
}
<div class="error-label container" style="display:none;">
    <div class="col-xs-12 text-center">提交错误，请根据提示修改</div>
    <span class="col-xs-12 text-right" id="error-label-close"><i class="fa fa-times"></i></span>
</div>
<script src="~/Scripts/jquery.form.min.js"></script>
<script>
    $(function () {
        if ($(".input-validation-error").length > 0) {
            $(".input-validation-error").closest(".weui_cell").addClass("weui_cell_warn");
            $(".error-label").show();
            setTimeout(function () {
                $(".error-label").fadeOut(1000)
            }, 3000);
        }
        cal_length();
    });
    $("#error-label-close").click(function () {
        $(".error-label").hide();
    });
    $("#submit-btn").click(function () {
        $("#report-form").ajaxSubmit(function (data) {
            if (data == "SUCCESS") {
                window.location.href = "/Seller/Wx_Manager_TaskHome";
            }
            else {
                $("#form_zone").html(data);
            }
        });
    });
    $(".weui_textarea").change(function () {
        cal_length();
    })
    function cal_length() {
        $("#current_length_cp").text($("#Event_Complete").val().length);
        $("#current_length_uc").text($("#Event_UnComplete").val().length);
        $("#current_length_as").text($("#Event_Assistance").val().length);
    }
</script>