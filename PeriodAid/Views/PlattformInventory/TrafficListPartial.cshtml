@model IEnumerable<PeriodAid.Models.TrafficData>
<div>
    <table class="table table-hover">
        <tr>
            <th>平台名称</th>
            <th>商品流量</th>
            <th>访客访次</th>
            <th>买家数</th>
            <th>订单数</th>
            <th>转化率</th>
            <th></th>
        </tr>
        <tr>
            <td class="color-blue">当日渠道流量汇总</td>
            <td>@Model.Sum(m=>m.Product_Flow)</td>
            <td>@Model.Sum(m => m.Product_Visitor)</td>
            <td>@Model.Sum(m => m.Product_Customer)</td>
            <td>@Model.Sum(m => m.Order_Count)</td>
            @if (Model.Sum(m => m.Product_Visitor) == 0)
            {
                <td>0</td>
            }
            else
            {
                <td class="product-ratio">@Math.Round(((decimal)Model.Sum(m => m.Product_Customer) / Model.Sum(m => m.Product_Visitor)), 4).ToString("p2")</td>
            }
            <td><a class="JD-Traffic-Order" style="cursor:pointer" data-source="0">渠道统计</a></td>
        </tr>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Date_Source</td>
                <td>@item.Product_Flow</td>
                <td>@item.Product_Visitor</td>
                <td>@item.Product_Customer</td>
                <td>@item.Order_Count</td>
                @if (item.Product_Visitor == 0)
                {
                    <td>0</td>
                }
                else
                {
                    <td class="product-ratio">@Math.Round(((decimal)item.Product_Customer / item.Product_Visitor), 4).ToString("p2")</td>
                }
                <td><a class="JD-Traffic-Order" style="cursor:pointer" data-source="@item.Date_Source_Id">渠道统计</a></td>
                
               
            </tr>
        }
    </table>
</div>
<script>
    $(function () {
        $(".JD-Traffic-Order").on("click", function () {
            $(this).attr("href", "ViewTrafficStatistic?productId=" + getUrlParam('productId') + "&sourceId=" + $(this).attr("data-source") + "&trafficPlattformId=" + $(this).attr("data-traffic"))
        })
    })
</script>